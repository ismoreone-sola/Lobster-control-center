<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOLA NOTEBOOK</title>
    <style>
        :root {
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-main: #2d3436;
            --text-accent: #6c5ce7;
            --record-red: #ff7675;
            --shadow: 0 15px 35px rgba(0,0,0,0.1);
        }

        body {
            font-family: 'Helvetica Neue', Arial, -apple-system, sans-serif;
            background: var(--bg-gradient);
            background-attachment: fixed;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            color: var(--text-main);
        }

        .container {
            width: 100%;
            max-width: 500px;
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding-top: 20px;
        }

        .title-main {
            font-size: 2.4em;
            font-weight: 300;
            color: white;
            letter-spacing: 4px;
            margin: 0;
            text-transform: uppercase;
        }

        .title-sub {
            font-size: 0.8em;
            color: rgba(255,255,255,0.7);
            letter-spacing: 8px;
            margin-top: 5px;
            text-transform: uppercase;
        }

        .main-card {
            background: var(--card-bg);
            border-radius: 30px;
            padding: 40px 30px;
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            text-align: center;
            margin-bottom: 30px;
        }

        #recordBtn {
            background: var(--text-accent);
            color: white;
            border: none;
            padding: 22px 45px;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: 600;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            width: 100%;
            box-shadow: 0 10px 20px rgba(108, 92, 231, 0.3);
        }

        #recordBtn:active { transform: scale(0.97); box-shadow: 0 5px 10px rgba(108, 92, 231, 0.2); }
        #recordBtn.recording { background: var(--record-red); animation: pulse 1.5s infinite; }

        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255, 118, 117, 0.4); } 70% { box-shadow: 0 0 0 20px rgba(255, 118, 117, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 118, 117, 0); } }

        #statusText { margin-top: 20px; font-size: 0.9em; color: #b2bec3; font-weight: 500; }

        .log-section { width: 100%; }
        .log-label { color: white; font-size: 0.9em; font-weight: 600; letter-spacing: 2px; margin-bottom: 20px; display: block; padding-left: 10px; }

        #msgLog { list-style: none; padding: 0; margin: 0; }

        .note-item {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            border-left: 5px solid var(--text-accent);
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn { from { opacity: 0; x: -20px; } to { opacity: 1; x: 0; } }

        .note-date {
            font-size: 0.75em;
            color: #bdc3c7;
            font-weight: 700;
            margin-bottom: 8px;
            display: block;
            font-family: monospace;
        }

        .note-content {
            font-size: 1.05em;
            line-height: 1.6;
            color: var(--text-main);
            font-weight: 400;
        }

        footer {
            text-align: center;
            color: rgba(255,255,255,0.4);
            font-size: 0.7em;
            letter-spacing: 2px;
            margin-top: 50px;
            padding-bottom: 30px;
        }

        /* 滾動條美化 */
        ::-webkit-scrollbar { width: 0px; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 class="title-main">SOLA</h1>
            <div class="title-sub">NOTEBOOK</div>
        </header>

        <div class="main-card">
            <button id="recordBtn">按這留言</button>
            <div id="statusText">等待指令 (限時10秒)</div>
        </div>

        <div class="log-section">
            <span class="log-label">RECENT NOTES</span>
            <div id="msgLog"></div>
        </div>

        <footer>
            DESIGNED BY SOLA &middot; 2026
        </footer>
    </div>

    <script>
        const btn = document.getElementById('recordBtn');
        const status = document.getElementById('statusText');
        const log = document.getElementById('msgLog');
        const MAX_MESSAGES = 50;

        let notes = JSON.parse(localStorage.getItem('sola_elegant_v3') || '[]');
        render();

        const Recognition = window.SpeechRecognition || window.webkitSpeechRecognition;

        function render() {
            if (notes.length === 0) {
                log.innerHTML = '<div style="color:rgba(255,255,255,0.3); text-align:center; padding-top:40px; font-size:0.8em; letter-spacing:2px;">NO RECENT DATA</div>';
                return;
            }
            log.innerHTML = notes.map(n => `
                <div class="note-item">
                    <span class="note-date">${n.fullDate}</span>
                    <div class="note-content">${n.text}</div>
                </div>
            `).join('');
        }

        function saveNote(text) {
            const now = new Date();
            const dateStr = `${now.getFullYear()}/${(now.getMonth()+1).toString().padStart(2,'0')}/${now.getDate().toString().padStart(2,'0')} ${now.getHours().toString().padStart(2,'0')}:${now.getMinutes().toString().padStart(2,'0')}:${now.getSeconds().toString().padStart(2,'0')}`;
            
            notes.unshift({ fullDate: dateStr, text: text });
            if (notes.length > MAX_MESSAGES) notes.pop();
            
            localStorage.setItem('sola_elegant_v3', JSON.stringify(notes));
            render();
        }

        if (Recognition) {
            const recog = new Recognition();
            recog.lang = 'zh-HK';
            let countdown;

            recog.onstart = () => {
                btn.classList.add('recording');
                btn.innerText = 'LISTENING';
                let left = 10.0;
                status.innerText = `READY... ${left.toFixed(1)}S`;
                
                countdown = setInterval(() => {
                    left -= 0.1;
                    status.innerText = `READY... ${Math.max(0, left).toFixed(1)}S`;
                    if (left <= 0) {
                        clearInterval(countdown);
                        recog.stop();
                    }
                }, 100);
            };

            recog.onresult = (e) => saveNote(e.results[0][0].transcript);

            recog.onend = () => {
                btn.classList.remove('recording');
                btn.innerText = '按這留言';
                status.innerText = 'SAVED';
                clearInterval(countdown);
                setTimeout(() => { if(!btn.classList.contains('recording')) status.innerText = '等待指令 (限時10秒)'; }, 3000);
            };

            btn.onclick = () => {
                if (btn.classList.contains('recording')) return;
                try { recog.start(); } catch(e) {}
            };
        } else {
            status.innerText = "UNSUPPORTED BROWSER";
            btn.disabled = true;
        }
    </script>
</body>
</html>